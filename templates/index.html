<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobilise - Smart Test Automation Tool</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-rocket"></i>
                    <h1>Mobilise1</h1>
                </div>
                <p class="tagline">Smart Test Automation Platform</p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Input Section -->
            <section class="input-section">
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-cog"></i> Test Configuration</h2>
                        <p>Enter website details to generate automated test cases</p>
                    </div>
                    <div class="card-body">
                        <form id="testForm">
                            <div class="form-group">
                                <label for="website_url">
                                    <i class="fas fa-globe"></i> Website URL
                                </label>
                                <input 
                                    type="url" 
                                    id="website_url" 
                                    name="website_url" 
                                    placeholder="https://example.com"
                                    required
                                >
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="login_id">
                                        <i class="fas fa-user"></i> Login ID / Username
                                    </label>
                                    <input 
                                        type="text" 
                                        id="login_id" 
                                        name="login_id" 
                                        placeholder="Enter login ID"
                                    >
                                </div>

                                <div class="form-group">
                                    <label for="password">
                                        <i class="fas fa-lock"></i> Password
                                    </label>
                                    <input 
                                        type="password" 
                                        id="password" 
                                        name="password" 
                                        placeholder="Enter password"
                                    >
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="headed_toggle">
                                        <i class="fas fa-eye"></i> Browser Mode
                                    </label>
                                    <select id="headed_toggle" name="headed_toggle">
                                        <option value="true" selected>Show Chrome (headed)</option>
                                        <option value="false">Run Headless (no UI)</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary" id="analyzeBtn">
                                    <i class="fas fa-search"></i> Analyze Website
                                </button>
                                <button type="button" class="btn btn-primary" id="generateBtn">
                                    <i class="fas fa-magic"></i> Generate Test Cases
                                </button>
                                <button type="button" class="btn btn-success" id="generateAndExecuteBtn">
                                    <i class="fas fa-play-circle"></i> Generate & Execute Tests
                                </button>
                                <button type="button" class="btn btn-info" id="testLoginBtn">
                                    <i class="fas fa-sign-in-alt"></i> Test Login
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Recording Section -->
            <section class="recording-section">
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-video"></i> Manual Recording Studio</h2>
                        <p>Record real user flows in Chrome, generate editable Selenium scripts, and replay them anytime.</p>
                    </div>
                    <div class="card-body">
                        <div class="recording-controls">
                            <div class="recording-buttons">
                                <button type="button" class="btn btn-warning" id="startRecordingBtn">
                                    <i class="fas fa-dot-circle"></i> Start Recording
                                </button>
                                <button type="button" class="btn btn-danger" id="stopRecordingBtn" disabled>
                                    <i class="fas fa-stop-circle"></i> Stop & Save
                                </button>
                            </div>
                            <div class="recording-status">
                                <span id="recordingStatusChip" class="status-chip status-idle">
                                    <i class="fas fa-circle"></i> Idle
                                </span>
                                <small>Recording opens a Chrome window. Interact manuallyâ€”every action becomes a step.</small>
                            </div>
                        </div>
                        <div class="recording-grid">
                            <div class="recording-panel">
                                <div class="panel-header">
                                    <h3><i class="fas fa-list-ol"></i> Recorded Steps</h3>
                                    <span id="recordedStepsCount" class="badge">0</span>
                                </div>
                                <div id="recordedStepsList" class="recording-list">
                                    <p class="muted-text">No steps captured yet.</p>
                                </div>
                            </div>
                            <div class="recording-panel">
                                <div class="panel-header">
                                    <h3><i class="fas fa-code"></i> Generated Script</h3>
                                    <div class="script-actions">
                                        <button type="button" class="btn btn-secondary btn-small" id="copyScriptBtn">
                                            <i class="fas fa-copy"></i> Copy
                                        </button>
                                        <button type="button" class="btn btn-secondary btn-small" id="downloadScriptBtn">
                                            <i class="fas fa-download"></i> Download
                                        </button>
                                    </div>
                                </div>
                                <textarea id="recordedScript" class="recording-script" placeholder="Script will appear here..." spellcheck="false"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- API Testing Section -->
            <section class="api-section">
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-plug"></i> API Testing Lab</h2>
                        <p>Import an OpenAPI/Swagger document to auto-generate and execute API suites.</p>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="api_base_url">
                                <i class="fas fa-link"></i> API Base URL
                            </label>
                            <input
                                type="url"
                                id="api_base_url"
                                name="api_base_url"
                                placeholder="https://api.example.com"
                            >
                        </div>
                        <div class="form-group">
                            <label for="apiSpecInput">
                                <i class="fas fa-code"></i> OpenAPI / Swagger JSON
                            </label>
                            <textarea
                                id="apiSpecInput"
                                class="api-textarea"
                                placeholder="Paste OpenAPI JSON here..."
                                rows="8"
                            ></textarea>
                            <small class="muted-text align-left">
                                Tip: paste the full specification or at least the paths section to generate rich test cases.
                            </small>
                        </div>
                        <div class="form-actions api-actions">
                            <button type="button" class="btn btn-primary" id="generateApiBtn">
                                <i class="fas fa-flask"></i> Generate API Tests
                            </button>
                            <button type="button" class="btn btn-success" id="executeApiBtn" disabled>
                                <i class="fas fa-play"></i> Execute API Tests
                            </button>
                            <button type="button" class="btn btn-secondary" id="clearApiBtn">
                                <i class="fas fa-undo"></i> Clear
                            </button>
                        </div>
                        <div class="api-downloads">
                            <button type="button" class="btn btn-secondary btn-small" id="downloadApiReportBtn" disabled>
                                <i class="fas fa-download"></i> Download Plan Report
                            </button>
                            <button type="button" class="btn btn-secondary btn-small" id="downloadApiExecutionBtn" disabled>
                                <i class="fas fa-file-alt"></i> Download Execution Report
                            </button>
                        </div>
                        <div id="apiSummary" class="api-summary" style="display: none;">
                            <div class="api-summary-grid">
                                <div class="api-summary-item">
                                    <span>Total Tests</span>
                                    <strong id="apiTotalCount">0</strong>
                                </div>
                                <div class="api-summary-item positive">
                                    <span>Positive</span>
                                    <strong id="apiPositiveCount">0</strong>
                                </div>
                                <div class="api-summary-item negative">
                                    <span>Negative</span>
                                    <strong id="apiNegativeCount">0</strong>
                                </div>
                            </div>
                        </div>
                        <div id="apiTestsList" class="api-tests-list">
                            <p class="muted-text">API test cases will appear here after generation.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Loading Section -->
            <section class="loading-section" id="loadingSection" style="display: none;">
                <div class="loading-card">
                    <div class="spinner"></div>
                    <h3 id="loadingText">Processing your request...</h3>
                    <p id="loadingSubtext">Please wait while we analyze the website</p>
                </div>
            </section>

            <!-- Results Section -->
            <section class="results-section" id="resultsSection" style="display: none;">
                <div class="summary-card">
                    <h2><i class="fas fa-chart-bar"></i> Test Summary</h2>
                    <div id="executionSummary" style="display: none; margin-bottom: 20px; padding: 15px; background: #f0f9ff; border-radius: 10px; border-left: 4px solid #3b82f6;">
                        <h3 style="margin-bottom: 10px; color: #1e40af;">Execution Results</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                            <div>
                                <strong>Total Tests:</strong> <span id="execTotalTests">0</span>
                            </div>
                            <div style="color: #10b981;">
                                <strong>Passed:</strong> <span id="execPassed">0</span>
                            </div>
                            <div style="color: #ef4444;">
                                <strong>Failed:</strong> <span id="execFailed">0</span>
                            </div>
                            <div style="color: #64748b;">
                                <strong>Skipped:</strong> <span id="execSkipped">0</span>
                            </div>
                            <div>
                                <strong>Execution Time:</strong> <span id="execTime">0</span>s
                            </div>
                        </div>
                    </div>
                    <div class="summary-grid">
                        <div class="summary-item positive">
                            <div class="summary-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="summary-content">
                                <h3 id="positiveCount">0</h3>
                                <p>Positive Tests</p>
                            </div>
                        </div>
                        <div class="summary-item negative">
                            <div class="summary-icon">
                                <i class="fas fa-times-circle"></i>
                            </div>
                            <div class="summary-content">
                                <h3 id="negativeCount">0</h3>
                                <p>Negative Tests</p>
                            </div>
                        </div>
                        <div class="summary-item ui">
                            <div class="summary-icon">
                                <i class="fas fa-paint-brush"></i>
                            </div>
                            <div class="summary-content">
                                <h3 id="uiCount">0</h3>
                                <p>UI Tests</p>
                            </div>
                        </div>
                        <div class="summary-item functional">
                            <div class="summary-icon">
                                <i class="fas fa-cogs"></i>
                            </div>
                            <div class="summary-content">
                                <h3 id="functionalCount">0</h3>
                                <p>Functional Tests</p>
                            </div>
                        </div>
                        <div class="summary-item total">
                            <div class="summary-icon">
                                <i class="fas fa-list"></i>
                            </div>
                            <div class="summary-content">
                                <h3 id="totalCount">0</h3>
                                <p>Total Tests</p>
                            </div>
                        </div>
                    </div>
                    <div class="download-section">
                        <button class="btn btn-download" id="downloadBtn">
                            <i class="fas fa-download"></i> Download JSON Report
                        </button>
                        <button class="btn btn-download" id="downloadExcelBtn">
                            <i class="fas fa-file-excel"></i> Download Excel Report
                        </button>
                    </div>
                    <div class="history-card">
                        <h3><i class="fas fa-history"></i> Recent Activity</h3>
                        <div id="runHistoryList" class="history-list">
                            <p class="muted-text align-left">No runs logged yet.</p>
                        </div>
                    </div>
                </div>

                <!-- Test Cases Tabs -->
                <div class="tabs-container">
                    <div class="tabs">
                        <button class="tab-btn active" data-tab="positive">
                            <i class="fas fa-check-circle"></i> Positive Tests
                            <span class="badge" id="positiveBadge">0</span>
                        </button>
                        <button class="tab-btn" data-tab="negative">
                            <i class="fas fa-times-circle"></i> Negative Tests
                            <span class="badge" id="negativeBadge">0</span>
                        </button>
                        <button class="tab-btn" data-tab="ui">
                            <i class="fas fa-paint-brush"></i> UI Tests
                            <span class="badge" id="uiBadge">0</span>
                        </button>
                        <button class="tab-btn" data-tab="functional">
                            <i class="fas fa-cogs"></i> Functional Tests
                            <span class="badge" id="functionalBadge">0</span>
                        </button>
                    </div>

                    <div class="tab-content">
                        <div class="tab-pane active" id="positiveTab">
                            <div class="test-cases-list" id="positiveTests"></div>
                        </div>
                        <div class="tab-pane" id="negativeTab">
                            <div class="test-cases-list" id="negativeTests"></div>
                        </div>
                        <div class="tab-pane" id="uiTab">
                            <div class="test-cases-list" id="uiTests"></div>
                        </div>
                        <div class="tab-pane" id="functionalTab">
                            <div class="test-cases-list" id="functionalTests"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Website Analysis Section -->
            <section class="analysis-section" id="analysisSection" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-microscope"></i> Website Analysis</h2>
                    </div>
                    <div class="card-body">
                        <div class="analysis-grid" id="analysisGrid"></div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2024 Mobilise. All rights reserved.</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
